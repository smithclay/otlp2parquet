# otlp2parquet Configuration via Environment Variables
# Copy this file to .env and customize for your environment
# All variables use the OTLP2PARQUET_ prefix for consistency

# ==============================================================================
# Configuration File (Optional)
# ==============================================================================

# Path to TOML configuration file (alternative to individual env vars)
# OTLP2PARQUET_CONFIG=/path/to/config.toml

# Inline TOML configuration content (useful for Lambda/Workers)
# OTLP2PARQUET_CONFIG_CONTENT="[batch]\nmax_rows = 100000\n..."


# ==============================================================================
# Batch Configuration (All Platforms)
# ==============================================================================

# Maximum number of rows per batch before flushing
# Default: Server/Lambda=200000, Cloudflare=100000
# OTLP2PARQUET_BATCH_MAX_ROWS=200000

# Maximum bytes per batch before flushing
# Default: Server/Lambda=134217728 (128 MB), Cloudflare=67108864 (64 MB)
# OTLP2PARQUET_BATCH_MAX_BYTES=134217728

# Maximum age of batch in seconds before flushing
# Default: Server/Lambda=10, Cloudflare=5
# OTLP2PARQUET_BATCH_MAX_AGE_SECS=10

# Enable or disable batching entirely
# Default: true
# OTLP2PARQUET_BATCHING_ENABLED=true


# ==============================================================================
# Request Handling Configuration (All Platforms)
# ==============================================================================

# Maximum HTTP payload size in bytes
# Default: Server=8388608 (8 MB), Lambda=6291456 (6 MB), Cloudflare=1048576 (1 MB)
# OTLP2PARQUET_MAX_PAYLOAD_BYTES=8388608


# ==============================================================================
# Storage Backend Configuration
# ==============================================================================

# Storage backend type: fs (filesystem), s3 (AWS S3), r2 (Cloudflare R2)
# Default: Server=fs, Lambda=s3, Cloudflare=r2
OTLP2PARQUET_STORAGE_BACKEND=fs


# --- Filesystem Storage (STORAGE_BACKEND=fs) ---

# Local directory path for storing Parquet files
# Default: ./data
OTLP2PARQUET_STORAGE_PATH=./data


# --- S3 Storage (STORAGE_BACKEND=s3) ---

# AWS S3 bucket name (required for s3 backend)
OTLP2PARQUET_S3_BUCKET=my-otlp-bucket

# AWS region (required for s3 backend)
# Default for Lambda: us-east-1
OTLP2PARQUET_S3_REGION=us-east-1

# Custom S3 endpoint (optional, for S3-compatible services like MinIO)
# Leave unset for standard AWS S3
# OTLP2PARQUET_S3_ENDPOINT=https://s3.custom-endpoint.com

# AWS credentials (optional - auto-discovered from environment or IAM role)
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key


# --- R2 Storage (STORAGE_BACKEND=r2) ---

# Cloudflare R2 bucket name (required for r2 backend)
OTLP2PARQUET_R2_BUCKET=my-r2-bucket

# Cloudflare account ID (required for r2 backend)
OTLP2PARQUET_R2_ACCOUNT_ID=your_account_id

# R2 API credentials (required for r2 backend)
OTLP2PARQUET_R2_ACCESS_KEY_ID=your_r2_access_key
OTLP2PARQUET_R2_SECRET_ACCESS_KEY=your_r2_secret_key


# ==============================================================================
# Server-Specific Configuration (Server Mode Only)
# ==============================================================================

# HTTP server listen address
# Default: 0.0.0.0:4318
OTLP2PARQUET_LISTEN_ADDR=0.0.0.0:4318

# Log level: trace, debug, info, warn, error
# Default: info
OTLP2PARQUET_LOG_LEVEL=info

# Log format: text (human-readable), json (structured)
# Default: text
# Use json for production/container environments
OTLP2PARQUET_LOG_FORMAT=text


# ==============================================================================
# Lambda-Specific Configuration
# ==============================================================================

# Lambda auto-detects S3 configuration from AWS environment
# AWS credentials are automatically discovered from the Lambda execution role
# Set OTLP2PARQUET_S3_BUCKET and OTLP2PARQUET_S3_REGION as needed


# ==============================================================================
# Cloudflare Workers-Specific Configuration
# ==============================================================================

# Cloudflare Workers uses R2 storage automatically
# R2 credentials should be configured in wrangler.toml or as Cloudflare secrets
# Set OTLP2PARQUET_R2_* variables in wrangler.toml [vars] section or via:
# wrangler secret put OTLP2PARQUET_R2_SECRET_ACCESS_KEY
